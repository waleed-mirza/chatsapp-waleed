(this.webpackJsonpchats=this.webpackJsonpchats||[]).push([[0],{127:function(e,t,c){"use strict";c.r(t);var a,n=c(0),i=c.n(n),s=c(11),r=c.n(s),o=(c(90),c(91),c(166)),d=c(46),l=c(165),j=c(167),p=c(168),h=c(159),O=c(163),b=c(164),u=c(76),x=c(12),m=c(42),f=c(77),v=function(e,t){switch(t.type){case"HANLDE_INPUT":return Object(x.a)(Object(x.a)({},e),{},{textField:t.payload});case"RECEIVE_MSG":return Object(x.a)(Object(x.a)({},e),{},{chats:Object(x.a)(Object(x.a)({},e.chats),{},Object(m.a)({},t.payload.topic,[].concat(Object(f.a)(e.chats[t.payload.topic]),[{from:t.payload.from,msg:t.payload.msg}])))});case"ACTIVE_TOPIC_CHANGE":return Object(x.a)(Object(x.a)({},e),{},{activeTopic:t.payload});default:return e}},g=c(70),y=c.n(g),T=c(7),E=Object(n.createContext)(),C=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT||3001,N={textField:"",chats:{Topic1:[],Topic2:[]},activeTopic:""},_=function(e){var t=e.children,c="f**k"+100*Math.random(100).toFixed(2),i=Object(n.useReducer)(v,N),s=Object(u.a)(i,2),r=s[0],o=s[1],d=Object.keys(r.chats);Object(n.useEffect)((function(){o({type:"ACTIVE_TOPIC_CHANGE",payload:d[0]})}),[r.textField]),a||(a=y()(":"+String(C),{transports:["websocket","polling","flashsocket"]}));return Object(T.jsx)(E.Provider,{value:Object(x.a)(Object(x.a)({},r),{},{handleChange:function(e){o({type:"HANLDE_INPUT",payload:e.target.value})},handleActiveTopic:function(e){o({type:"ACTIVE_TOPIC_CHANGE",payload:e.target.innerText})},sendMessage:function(e){a.emit("chat message",e),a.removeAllListeners("chat message"),a.on("chat message",(function(e){o({type:"RECEIVE_MSG",payload:Object(x.a)({},e)})}))},emptyInput:function(){o({type:"HANLDE_INPUT",payload:""})},user:c}),children:t})};function A(){return Object(n.useContext)(E)}var I=function(){var e=A(),t=e.chats,c=e.handleActiveTopic,a=Object.keys(t),n=k();return Object(T.jsx)("div",{className:n.topics,children:Object(T.jsx)(h.a,{children:a.map((function(e){return Object(T.jsx)(O.a,{button:!0,onClick:c,children:Object(T.jsx)(b.a,{primary:e})},e)}))})})},S=c(169),P=function(){var e=k(),t=A(),c=t.chats,a=t.activeTopic;return a?Object(T.jsx)("div",{className:e.chat,children:c[a].map((function(t,c){return Object(T.jsxs)("div",{className:e.flex,children:[Object(T.jsx)(S.a,{label:t.from,className:e.chip}),Object(T.jsx)(d.a,{component:"p",children:t.msg})]},c)}))}):Object(T.jsx)("div",{children:"Loading"})},k=Object(l.a)((function(e){return{root:{padding:e.spacing(3,2),margin:"20px"},flex:{display:"flex",alignItems:"center"},topics:{width:"30%",height:"400px",borderRight:"2px solid #ccc"},chat:{width:"70%",height:"400px",padding:"20px"},input:{width:"85%"},button:{width:"15%"}}}));function H(){var e=A(),t=e.textField,c=e.handleChange,a=e.activeTopic,n=e.sendMessage,i=e.emptyInput,s=e.user,r=k();return Object(T.jsx)("div",{children:Object(T.jsxs)(o.a,{className:r.root,children:[Object(T.jsx)(d.a,{variant:"h4",component:"h5",style:{textAlign:"center"},children:"Chats"}),Object(T.jsx)(d.a,{variant:"h5",component:"h6",style:{textAlign:"center"},children:a}),Object(T.jsxs)("div",{className:r.flex,children:[Object(T.jsx)(I,{}),Object(T.jsx)(P,{})]}),Object(T.jsxs)("div",{className:r.flex,children:[Object(T.jsx)(p.a,{id:"standard-name",label:"Send a Message",className:r.input,value:t,onChange:c}),Object(T.jsx)(j.a,{variant:"contained",color:"primary",className:r.button,onClick:function(){n({from:s,msg:t,topic:a}),i()},children:"Send"})]})]})})}var R=function(){return Object(T.jsx)("div",{className:"App",children:Object(T.jsx)(H,{})})};r.a.render(Object(T.jsx)(i.a.StrictMode,{children:Object(T.jsx)(_,{children:Object(T.jsx)(R,{})})}),document.getElementById("root"))},90:function(e,t,c){},91:function(e,t,c){}},[[127,1,2]]]);
//# sourceMappingURL=main.6e22dde7.chunk.js.map