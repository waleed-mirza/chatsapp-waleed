(this.webpackJsonpchats=this.webpackJsonpchats||[]).push([[0],{110:function(e,t,c){},111:function(e,t,c){},162:function(e,t,c){"use strict";c.r(t);var n,a=c(0),o=c.n(a),i=c(11),r=c.n(i),s=(c(110),c(111),c(196)),l=c(55),d=c(195),j=c(197),p=c(198),h=c(190),u=c(193),b=c(194),x=c(53),O=c(14),f=c(48),g=c(90),m=function(e,t){switch(t.type){case"HANLDE_INPUT":return Object(O.a)(Object(O.a)({},e),{},{textField:t.payload});case"RECEIVE_MSG":return Object(O.a)(Object(O.a)({},e),{},{chats:Object(O.a)(Object(O.a)({},e.chats),{},Object(f.a)({},t.payload.topic,[].concat(Object(g.a)(e.chats[t.payload.topic]),[{from:t.payload.from,msg:t.payload.msg}])))});case"ACTIVE_TOPIC_CHANGE":return Object(O.a)(Object(O.a)({},e),{},{activeTopic:t.payload});default:return e}},v=c(84),y=c.n(v),C=c(4),E=Object(a.createContext)(),T=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT,{textField:"",chats:{Topic1:[],Topic2:[]},activeTopic:""}),N=function(e){var t=e.children,c="_"+Math.random().toString(36).substr(2,9),o=Object(a.useReducer)(m,T),i=Object(x.a)(o,2),r=i[0],s=i[1],l=Object.keys(r.chats);if(Object(a.useEffect)((function(){s({type:"ACTIVE_TOPIC_CHANGE",payload:l[0]}),n&&(n.removeAllListeners("chat message"),n.on("chat message",(function(e){s({type:"RECEIVE_MSG",payload:Object(O.a)({},e)})})))}),[]),!n){n=y()("/",{transports:["websocket","polling","flashsocket"]})}return Object(C.jsx)(E.Provider,{value:Object(O.a)(Object(O.a)({},r),{},{handleChange:function(e){s({type:"HANLDE_INPUT",payload:e.target.value})},handleActiveTopic:function(e){s({type:"ACTIVE_TOPIC_CHANGE",payload:e.target.innerText})},sendMessage:function(e){n.emit("chat message",e),n.removeAllListeners("chat message"),n.on("chat message",(function(e){s({type:"RECEIVE_MSG",payload:Object(O.a)({},e)})}))},emptyInput:function(){s({type:"HANLDE_INPUT",payload:""})},user:c}),children:t})};function _(){return Object(a.useContext)(E)}var I=function(){var e=_(),t=e.chats,c=e.handleActiveTopic,n=Object.keys(t),a=A();return Object(C.jsx)("div",{className:a.topics,children:Object(C.jsx)(h.a,{children:n.map((function(e){return Object(C.jsx)(u.a,{button:!0,onClick:c,className:a.topicbutton,children:Object(C.jsx)(b.a,{primary:e})},e)}))})})},k=c(200),w=function(){var e=Object(a.useRef)(null);Object(a.useEffect)((function(){var t;null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"smooth"})}));var t=A(),c=_(),n=c.chats,o=c.activeTopic;return o?Object(C.jsx)("div",{className:t.chat,children:Object(C.jsx)("div",{style:{height:"auto",overflowY:"scroll",overflowX:"hidden!important",width:"100%",boxSizing:"content-box",paddingRight:"50px"},children:n[o].map((function(c,n){var a=function(e){for(var t="",c=0,n=0;c<e.length;c++)" "===e[c]&&(n=0),n>=30?(t+=e[c],t+="\n",n=0):(n++,t+=e[c]);return t}(c.msg);return Object(C.jsxs)("div",{className:t.flex2,children:[Object(C.jsx)(k.a,{label:c.from,className:t.chip}),Object(C.jsx)(l.a,{component:"p",children:a}),Object(C.jsx)("div",{ref:e})]},n)}))})}):Object(C.jsx)("div",{children:"Loading"})},S=c(199),A=(c(145),Object(d.a)((function(e){return{root:{padding:e.spacing(3,2),backgroundColor:"#000000"},flex:{display:"flex",alignItems:"center",justifyContent:"space-between","& > *":{margin:"0px 8px 0px 0px"}},flex2:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",width:"95%",height:"auto","& > *":{marginRight:"5px",marginTop:"3px"}},topics:{width:"20%",height:"400px",backgroundColor:"#F47806",borderRadius:"20px"},chat:{width:"80%",height:"360px",padding:"20px",backgroundColor:"#FC9B40",borderRadius:"20px",display:"flex",flexDirection:"column",justifyContent:"flex-end",overflow:"hidden"},input:{width:"65%",backgroundColor:"#FC9B40",color:"#000000",borderRadius:"20px"},button:{width:"15%",padding:"15px 15px",color:"#000000",backgroundColor:"#F47806",borderRadius:"20px",fontWeight:"700"},topicbutton:{marginBottom:"5px","&:hover":{backgroundColor:"#FC9B40",color:"white"}},topicchange:{width:"20%",color:"white!important"},chip:{backgroundColor:"#F50056",color:"#000000"}}})));function R(){var e=_(),t=e.textField,c=e.handleChange,n=e.activeTopic,a=e.sendMessage,o=e.emptyInput,i=e.user,r=A();return Object(C.jsx)("div",{children:Object(C.jsxs)(s.a,{className:r.root,children:[Object(C.jsx)(S.a,{mb:2,children:Object(C.jsx)(l.a,{variant:"h4",component:"h5",children:Object(C.jsxs)(S.a,{className:r.topicchange,children:["Kama",Object(C.jsx)("span",{style:{color:"#F47806"},children:"kazi"})]})})}),Object(C.jsxs)("div",{className:r.flex,children:[Object(C.jsx)(I,{}),Object(C.jsx)(w,{})]}),Object(C.jsx)(S.a,{mt:1,children:Object(C.jsxs)("div",{className:r.flex,children:[Object(C.jsx)(l.a,{className:r.topicchange,variant:"h5",component:"h6",style:{textAlign:"center"},children:Object(C.jsx)(S.a,{children:n})}),Object(C.jsx)(p.a,{id:"outlined-basic",variant:"outlined",label:"Send a message",className:r.input,value:t,required:!0,onChange:c,onKeyPress:function(e){t&&"Enter"===e.key&&(a({from:i,msg:t,topic:n}),o())}}),Object(C.jsx)(j.a,{variant:"contained",className:r.button,onClick:function(){t&&(a({from:i,msg:t,topic:n}),o())},children:"Send"})]})})]})})}c(41),Object(d.a)((function(e){return{root:{marginTop:e.spacing(1)}}}));c(12),Object(d.a)((function(e){return{root:{marginTop:e.spacing(1)}}}));var F=function(){return Object(C.jsx)("div",{children:Object(C.jsx)("div",{style:{backgroundColor:"#000000",height:"100vh"},children:Object(C.jsx)(R,{})})})};r.a.render(Object(C.jsx)(o.a.StrictMode,{children:Object(C.jsx)(N,{children:Object(C.jsx)(F,{})})}),document.getElementById("root"))}},[[162,1,2]]]);
//# sourceMappingURL=main.a31e5e6a.chunk.js.map